{
    "collab_server" : "",
    "contents" : "library(\"magick\")\nlibrary(\"png\")\nlibrary(\"colorspace\")\nlibrary(\"svDialogs\")\n\nrm(list = ls())\n\nblank1 <- image_read(\"C:/Users/RISHABH/Documents/Whiz Project/ImageExtraction/1/blank1.JPG\")\nblank2 <- image_read(\"C:/Users/RISHABH/Documents/Whiz Project/ImageExtraction/1/blank2.JPG\")\nresponse1 <- image_read(\"C:/Users/RISHABH/Documents/Whiz Project/ImageExtraction/1/Response1.JPG\")\nresponse2 <- image_read(\"C:/Users/RISHABH/Documents/Whiz Project/ImageExtraction/1/Response2.JPG\")\n\nblank1 <- image_quantize(blank1,colorspace = \"gray\")\nblank1 <- image_convert(blank1,format = \"png\")\nblank1 <- image_resize(blank1,\"800x\")\n\nblank2 <- image_quantize(blank2,colorspace = \"gray\")\nblank2 <- image_convert(blank2,format = \"png\")\nblank2 <- image_resize(blank2,\"800x\")\n\nresponse1 <- image_quantize(response1,colorspace = \"gray\")\nresponse1 <- image_convert(response1,format = \"png\")\nresponse1 <- image_resize(response1,\"800x\")\n\nresponse2 <- image_quantize(response2,colorspace = \"gray\")\nresponse2 <- image_convert(response2,format = \"png\")\nresponse2 <- image_resize(response2,\"800x\")\n\ntmpName <- tempfile(pattern = \"b1\",fileext = \".png\")\nimage_write(blank1,path = tmpName)\nblank1 <- readPNG(tmpName)\nblank1 <- round(255*blank1)\nimage(blank1 ,col = gray(0:255 / 256))\n\ntmpName <- tempfile(pattern = \"b2\",fileext = \".png\")\nimage_write(blank2,path = tmpName)\nblank2 <- readPNG(tmpName)\nblank2 <- round(255*blank2)\nimage(blank2 ,col = gray(0:255 / 256))\n\ntmpName <- tempfile(pattern = \"r1\",fileext = \".png\")\nimage_write(response1,path = tmpName)\nresponse1 <- readPNG(tmpName)\nresponse1 <- round(255*response1)\nimage(response1 ,col = gray(0:255 / 256))\n\ntmpName <- tempfile(pattern = \"r2\",fileext = \".png\")\nimage_write(response2,path = tmpName)\nresponse2 <- readPNG(tmpName)\nresponse2 <- round(255*response2)\nimage(response2 ,col = gray(0:255 / 256))\n\n\npage1 <- blank1 - response1\npage2 <- blank2 - response2\n\nwritePNG(page1/255,target = tmpName)\nImage <- image_read(path = tmpName)\nsaveDirectory <- dlgSave(title = \"Save Page1 Image to\")$res\nimage_write(Image,path = saveDirectory,format = \"png\")\n\nwritePNG(page2/255,target = tmpName)\nImage <- image_read(path = tmpName)\nsaveDirectory <- dlgSave(title = \"Save Page2 Image to\")$res\nimage_write(Image,path = saveDirectory,format = \"png\")\n\n#Meta Data Page1 : blocks of 180X30 150X30 130X30 130X30 starting from 120X150 to 700X490\ni <- 150\nqn <- 1\nwhile(i<480&&qn<=11){\n  j <- 120\n  a <- 0\n  for(k in (j:(j+180))){\n    for(l in (i:(i+30))){\n      a <- a + page1[l,k]\n     # tst[l,k] <- 255\n    }\n  }\n  #image(tst,col = gray(0:255 / 256))\n  j<-j+180\n  b <- 0\n  for(k in (j:(j+150))){\n    for(l in (i:(i+30))){\n      b <- b + page1[l,k]\n    }\n  }\n  j<-j+150\n  c <- 0\n  for(k in (j:(j+130))){\n    for(l in (i:(i+30))){\n      c <- c + page1[l,k]\n    }\n  }\n  j<-j+130\n  d <- 0\n  for(k in (j:(j+130))){\n    for(l in (i:(i+30))){\n      d <- d + page1[l,k]\n    }\n  }\n  x <- max(a,b,c,d)\n  if(x==a){\n    print(paste0(\"Question \",qn,\" : A\"))\n  }else if(x==b){\n    print(paste0(\"Question \",qn,\" : B\"))\n  }else if(x==c){\n    print(paste0(\"Question \",qn,\" : C\"))\n  }else{\n    print(paste0(\"Question \",qn,\" : D\"))\n  }\n  i <- i + 30 \n  qn <- qn+1\n}\n#Meta Data Page2 : blocks of 180X25 140X25 140X25 130X25 starting from 135X120 to 700X480\ni <- 135\nqn <- 12\nhts <- numeric(17)+18\nhts[c(13,16,21)-11] = 25\nhts[27-11] <- 45\nwhile(i<480&&qn<=28){\n  j <- 120\n  a <- 0\n  for(k in (j:(j+180))){\n    for(l in (i:(i+hts[qn-11]))){\n      a <- a + page2[l,k]\n      # tst[l,k] <- 255\n    }\n  }\n  #image(tst,col = gray(0:255 / 256))\n  j<-j+180\n  b <- 0\n  for(k in (j:(j+140))){\n    for(l in (i:(i+hts[qn-11]))){\n      b <- b + page2[l,k]\n    }\n  }\n  j<-j+140\n  c <- 0\n  for(k in (j:(j+140))){\n    for(l in (i:(i+hts[qn-11]))){\n      c <- c + page2[l,k]\n    }\n  }\n  j<-j+140\n  d <- 0\n  for(k in (j:(j+130))){\n    for(l in (i:(i+hts[qn-11]))){\n      d <- d + page2[l,k]\n    }\n  }\n  x <- max(a,b,c,d)\n  if(a==b&&b==c&&c==d){\n    print(paste0(\"Question \",qn,\" : U\"))\n  }else if(x==a){\n    print(paste0(\"Question \",qn,\" : A\"))\n  }else if(x==b){\n    print(paste0(\"Question \",qn,\" : B\"))\n  }else if(x==c){\n    print(paste0(\"Question \",qn,\" : C\"))\n  }else{\n    print(paste0(\"Question \",qn,\" : D\"))\n  }\n  i <- i + hts[qn-11]\n  qn <- qn+1\n}\n\n\n",
    "created" : 1521861872385.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3078187257",
    "id" : "DF4231F3",
    "lastKnownWriteTime" : 1521869978,
    "last_content_update" : 1521882396914,
    "path" : "~/Whiz Project/ImageExtraction/Phase1.R",
    "project_path" : "Phase1.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}